generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model User {
  id       String  @id @default(cuid())
  email    String  @unique
  name     String
  password String
  photo    String?

  rooms Room[]
  chats Chat[]
}

model Room {
  id        Int      @id @default(autoincrement())
  slug      String   @unique
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  adminId String
  admin   User   @relation(fields: [adminId], references: [id])

  chats  Chat[]
  shapes Shape[] // <--- Added relation to Shape
}

model Chat {
  id        Int      @id @default(autoincrement())
  message   String
  userId    String
  roomId    Int
  createdAt DateTime @default(now())

  user User @relation(fields: [userId], references: [id])
  room Room @relation(fields: [roomId], references: [id])
}

// --- NEW MODEL ---
model Shape {
  id     Int    @id @default(autoincrement())
  roomId Int
  type   String // "rect" | "circle" | "line"

  // Rect properties
  x      Float?
  y      Float?
  width  Float?
  height Float?

  // Circle properties 
  // (Note: You could reuse x/y, but separate fields are clearer for your TS types)
  centerX Float?
  centerY Float?
  radius  Float?

  // Line properties
  startX Float?
  startY Float?
  endX   Float?
  endY   Float?

  room Room @relation(fields: [roomId], references: [id])
}
